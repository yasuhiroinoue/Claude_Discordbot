# Discord bot with Claude-4.5 (Thinking) using Google Cloud VertexAI

Claude Bot is a sophisticated Discord bot that leverages Google Cloud's VertexAI and the Claude-4.5 language model to interact with users through text, image, and PDF responses. It's designed to enhance Discord servers by providing intelligent and contextual interactions.

## Features

- **Advanced Text Processing**: Utilizes Claude-4.5, a powerful language model, for generating meaningful text responses.
- **Image Recognition**: Can analyze and respond to images sent by users.
- **PDF Processing**: Newly added capability to process and understand PDF documents.
- **Supports Multiple Programming Languages**: Can process various programming language source code files and provide relevant responses.
- **Environmentally Friendly**: Uses environment variables for secure configuration.
- **Customizable and Scalable**: Easy to adjust settings and scale for different use cases.
- **Conversation History**: Remembers previous interactions (configurable length) to provide context-aware responses.
- **Save Responses**: Users can save the bot's responses as text files directly in Discord using the `!save` command.
- **Multi-File Support**: Can process multiple attachments (images, PDFs, text files) in a single message.


## Supported File Extensions

The bot uses Python's standard `mimetypes` module to automatically detect file types. It generally supports:

-   **Images**: `.png`, `.jpg`, `.jpeg`, `.gif`, `.webp`
-   **Documents**: `.pdf`
-   **Text/Code**: Most text-based files are automatically supported. Explicit support is added for:
    -   **Web**: `.html`, `.css`, `.js`, `.ts`, `.php`
    -   **Data/Config**: `.json`, `.csv`, `.xml`, `.yaml`, `.yml`, `.ini`, `.conf`, `.env`, `.sql`
    -   **Code**: `.py`, `.c`, `.h`, `.cpp`, `.hpp`, `.rs`, `.cs`, `.rb`, `.pl`, `.pm`, `.swift`, `.r`, `.go`, `.kt`, `.java`, `.lua`
    -   **Scripts**: `.sh`, `.bat`
    -   **Docs**: `.md`, `.txt`

## Prerequisites

-   Python 3.8 or newer.
-   A Google Cloud account and project setup for VertexAI.
-   A Discord bot token.

## Installation

1.  **Clone the Repository**

    Start by cloning the repository to your local machine:

    ```bash
    git clone <repository-url>
    cd <repository-directory>
    ```

2.  **Install Required Packages**

    Install the Python dependencies listed in `requirements.txt`:

    ```bash
    pip install -r requirements.txt
    ```

    Ensure `python-dotenv` and `Pillow` are installed:
    ```bash
    pip install python-dotenv Pillow
    ```


    Additionally, install the `anthropic[vertex]` package for VertexAI integration:

    ```bash
    python -m pip install -U 'anthropic[vertex]'
    ```

3.  **Configure Environment Variables**

    Create a `.env` file in the root directory of the project and populate it with the necessary environment variables:

    ```
    DISCORD_BOT_TOKEN=<Your Discord Bot Token>
    MAX_HISTORY=<Maximum Number of Message Pairs to Remember>
    GCP_REGION=<Google Cloud Platform Region>
    GCP_PROJECT_ID=<Your GCP Project ID>
    MODEL=<The model name of VertexAI>
    ```

    Replace the placeholders with your actual information.  `MAX_HISTORY` refers to the number of *pairs* of user/assistant messages to store.  `MODEL` is the name of the Vertex AI model to use (e.g., `claude-sonnet-4-5@20250929`).



4.  **Run the Bot**

    With the setup complete, you can start the bot using:

    ```bash
    python ClaudeDiscordBot.py
    ```

## Usage

Once the bot is running, it will listen for messages in all the servers it has been added to. Users can interact with the bot by:

-   Mentioning the bot in a message (`@BotName`).
-   Sending a direct message (DM) to the bot.
-   Uploading supported file types (images, PDFs, text-based files).
-   **Sending multiple files**: You can attach multiple files (images, PDFs, text) in a single message. The bot will process all of them.
-   Using the `!save` command at the beginning of message to save the response as a file.


The bot can process both text and images, and now PDFs, providing responses generated by Claude-4.5. You can reset the conversation history by sending `RESET` (case-insensitive) to the bot.


## Customization

Modify the `.env` file to change environmental settings such as the Discord bot token, maximum message history, and Google Cloud configurations. The code itself can be customized to alter the bot's behavior, command prefixes, and more.

## Contributing

Contributions are welcome! Please feel free to fork the repository, make changes, and submit pull requests.

## License

This project is licensed under the MIT License - see the LICENSE file for details.
